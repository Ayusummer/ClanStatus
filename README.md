# ClanStatus
Hoshino 2 æ¨¡å—, è¯»å– yobot çš„ sqlite3 æ•°æ®åº“åé¦ˆå½“å‰ä¼šæˆ˜çŠ¶æ€(å·²å‡ºåˆ€æ•°,å‰©ä½™å®Œæ•´åˆ€å’Œè¡¥å¿åˆ€æ•°. æ‰‹ä¸Šè¿˜æœ‰è¡¥å¿çš„æˆå‘˜æ˜µç§°)

---
## éƒ¨ç½²è¯´æ˜

- ä½¿ç”¨ `cd` å‘½ä»¤è½¬åˆ° `hoshino` çš„ `modules` ç›®å½•

- `clone` æ­¤ `repo`  
  ```bash
    git clone https://github.com/Ayusummer/ClanStatus.git
  ```
- æ‰“å¼€ `clan_status.py`, ä¿®æ”¹ line11 yobot æ•°æ®åº“çš„è·¯å¾„
- æ‰“å¼€ `__bot__.py` åœ¨ `MODULES_ON` ä¸­æ·»åŠ  `'ClanStatus'`
- é‡å¯ `hoshino`

---
## ä½¿ç”¨è¯´æ˜
- åœ¨ç¾¤èŠä¸­å‘é€ `çŠ¶æ€` å³å¯è·å¾—åé¦ˆ   
  ![image](https://user-images.githubusercontent.com/59549826/141664088-d42f01a0-7705-42aa-ba64-ad212e552d15.png)

---
## é€»è¾‘è¯´æ˜
> é€»è¾‘å†—ä½™å¾ˆå¤š, sql ä¸ç†Ÿç»ƒğŸ¥²
- è¯» `yobotdata.db` çš„ `clan_challenge` è¡¨è·å–æœ€åä¸€ä¸ª `pcrdate` çš„æ‰€æœ‰æ•°æ®å†™å…¥ä¸€ä¸ªæ–°çš„è¡¨ `table_lastDate` ä¸­
    > æ•°æ®å†™åˆ°æ–°è¡¨é‡Œä¸»è¦æ˜¯ä¸æ¸…æ¥šåé¢ä¼šä¸ä¼šæœ‰æ–°éœ€æ±‚è¦æ”¹æ‰€ä»¥å»ºäº†ä¸ªè¡¨æŠŠåŸå§‹æ•°æ®å­˜ä¸‹
- è¯» `table_lastDate` å°† `qqid` å’Œ `boss_health_remain` æ‰“ç»„ä¼ ç»™ `data_simple_data`
- å°† `data_simple_data` æŒ‰ç…§ `qqid` åˆ†ç»„ç”Ÿæˆåˆ—è¡¨ `data_simple_data_split`, æ¯ç»„è¡¨ç¤ºä¸€ä¸ªæˆå‘˜çš„å½“æ—¥å‡ºåˆ€æ•°æ®
- éå† `data_simple_data_split`
  - æ¯ç»„åˆ—è¡¨æ ¹æ® `boss_health_remain` åˆ¤æ–­æ˜¯å¦æ‰‹ä¸Šè¿˜æœ‰è¡¥å¿åˆ€å¹¶è®¡ç®—å‡ºè¯¥æˆå‘˜å·²å‡ºçš„å®Œæ•´åˆ€;   
    è‹¥æ‰‹ä¸­æœ‰è¡¥å¿åˆ€åˆ™å°†æ­¤ qqid å†™å…¥ `attacked_half_lst(æ‰‹ä¸­è¿˜æœ‰è¡¥å¿åˆ€çš„ qqid åˆ—è¡¨)`
  - éå†å®Œæ‰€æœ‰ç»„å¾—å‡ºæ€»çš„æ•´åˆ€æ•°ç›®å’Œè¡¥å¿åˆ€æ•°ç›®
- éå† `attacked_half_lst` æŸ¥ `user` è¡¨å¾—å‡º `nickname`
- åé¦ˆå‡ºåˆ€æƒ…å†µå’Œè¡¥å¿åˆ€æƒ…å†µ



